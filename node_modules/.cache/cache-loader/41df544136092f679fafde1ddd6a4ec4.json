{"remainingRequest":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/thread-loader/dist/cjs.js!/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/babel-loader/lib/index.js!/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danielsecco/Downloads/offline1---beta---v1-master/src/components/comps/Foto.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/src/components/comps/Foto.vue","mtime":1530302629000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/.babelrc","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/cache-loader/dist/cjs.js","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/thread-loader/dist/cjs.js","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/babel-loader/lib/index.js","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/vue-loader/lib/index.js","mtime":1530276600000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar downloadURL;\nimport { firestore } from '@/main.js';\nimport { noty } from '@/assets/js/config.js';\n\nvar $ = require('jquery');\n\nwindow.post = {};\nimport Swiper from 'swiper';\nexport default {\n  name: 'foto',\n  data: function data() {\n    return {\n      msg: 'Imagens',\n      image: '',\n      imageB: '',\n      urr: ''\n    };\n  },\n  methods: {\n    onFileChange: function onFileChange(e) {\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length) return;\n      this.createImage(files[0]); // this.createImageTest(files[0]);\n\n      var file = e.target.files[0]; //var storageRef = firebase.storage().ref(file.name);\n\n      console.log('<filename =============>', file.size);\n      var metadata = {\n        contentType: 'image/jpeg'\n      };\n    },\n    createImage: function createImage(file) {\n      var _this = this;\n\n      var dataT = new Date();\n      var image = new Image();\n      var reader = new FileReader();\n      var vm = this;\n\n      reader.onload = function (e) {\n        vm.image = e.target.result; // $(\"#lastIMG\").append('<img  src=\"' + vm.image + '\" width=\"100px\" height=\"auto\"/>');\n\n        var ind = new Date().toISOString();\n        post = {\n          id: ind,\n          image: vm.image,\n          lele: vm.image.length,\n          tag_num: _this.$store.getters.getterTagN,\n          geolocation: _this.$store.getters.getterGeoL,\n          cod_Tree: _this.$store.getters.getterCodTree,\n          data: dataT.getDate() + '/' + dataT.getMonth() + '/' + dataT.getFullYear(),\n          hora: dataT.getHours() + ':' + dataT.getMinutes() + ':' + dataT.getSeconds(),\n          user: _this.$store.getters.getterUsrN,\n          counts: '',\n          downloadlink: ''\n        };\n        console.log('variavel>', post); //  $(\"#imgLoad\").remove();\n\n        _this.ResizeImage(file);\n      };\n\n      reader.readAsDataURL(file);\n      console.log('readerfile > ', reader);\n    },\n    ResizeImage: function ResizeImage(file) {\n      if ( //window.File && window.FileReader\n      navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        // var filesToUploads = document.getElementById('inputF').files;\n        //var file = filesToUploads[0];\n        //var file = post.image;\n        if (file) {\n          var reader = new FileReader(); // Set the image once loaded into file reader\n\n          reader.onload = function (e) {\n            var img = document.createElement(\"img\");\n            img.id = 'result';\n            img.src = e.target.result;\n            var canvas = document.createElement(\"canvas\");\n            var ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            var MAX_WIDTH = 1024;\n            var MAX_HEIGHT = 768;\n            var width = img.width;\n            var height = img.height;\n\n            if (width > height) {\n              if (width > MAX_WIDTH) {\n                height *= MAX_WIDTH / width;\n                width = MAX_WIDTH;\n              }\n            } else {\n              if (height > MAX_HEIGHT) {\n                width *= MAX_HEIGHT / height;\n                height = MAX_HEIGHT;\n              }\n            }\n\n            canvas.width = width;\n            canvas.height = height; // var ctx = canvas.getContext(\"2d\");\n\n            ctx.drawImage(img, 0, 0, width, height);\n            var dataurl = canvas.toDataURL(file.type); //document.getElementById('lastIMG').src = dataurl;\n\n            post.image = dataurl;\n            post.lele = dataurl.length;\n            $(\"#imgLoad\").remove();\n            $(\"#imgL\").attr(\"src\", post.image);\n            console.log('readerfile new> ', post);\n          };\n\n          reader.readAsDataURL(file);\n        }\n      } else {\n        alert('The File APIs are not fully supported in this browser.');\n      }\n    },\n    removeImage: function removeImage(e) {\n      $(\"#imgL\").attr(\"src\", \"\"); // $(\"#lastIMG\").remove();\n      // $(\"#imgLoad\").remove();\n    },\n    avancar: function avancar() {\n      // post.downloadlink =  downloadURL ;\n      firestore.collection(\"sid\").doc(post.id).set(post).then(function (docRef) {\n        console.log(\"Document written with ID: \", post.id); //console.log(\"Document Data with ID: \", dodoref);\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error);\n      });\n      firestore.collection(\"sid2\").add(post).then(function (docRef) {\n        console.log(\"Document written with ID: \", docRef.id);\n      }).catch(function (error) {\n        console.error(\"Error adding document: \", error);\n      });\n\n      if ('serviceWorker' in navigator && 'SyncManager' in window) {\n        navigator.serviceWorker.ready.then(function (sw) {\n          writeData('sync-posts', post).then(function () {\n            return sw.sync.register('sync-new-posts');\n          }).then(function () {\n            var data = {\n              message: 'Your Post was saved for syncing!'\n            };\n            noty(\"success\", data.message, post.id);\n            console.log(data);\n          }).catch(function (err) {\n            console.log(err);\n          });\n        });\n      }\n\n      ;\n\n      if ('indexedDB' in window) {\n        readAllData('sync-posts').then(function (data) {\n          console.log('From cache', data);\n\n          for (var key in data) {\n            document.getElementById(\"sync-p\").innerHTML = \"data for sync  index !!!! .> .  \" + key + 1;\n          }\n        });\n      }\n\n      ;\n      var mySwiper = new Swiper('.swiper-container', {}); //mySwiper.slideTo(1);\n\n      this.$router.push('/');\n    },\n    carregar: function carregar() {\n      for (var i = 1; i < 400; i++) {\n        var ind = new Date().toISOString();\n        post.id = '\"' + i + '\"';\n        post.counts = i;\n        console.log(i);\n        firestore.collection(\"sid3\").doc('\"' + i + '\"').set(post).then(function (docRef) {\n          console.log(\"Document written with ID: \" + '  >' + i);\n        }).catch(function (error) {\n          console.error(\"Error adding document: \", error);\n        });\n\n        if ('serviceWorker' in navigator && 'SyncManager' in window) {\n          navigator.serviceWorker.ready.then(function (sw) {\n            writeData('sync-posts', post).then(function () {\n              return sw.sync.register('sync-new-posts');\n            }).then(function () {\n              var data = {\n                message: 'Your Post was saved for syncing!'\n              }; // noty(\"success\", data.message, post.id);\n\n              console.log(data);\n            }).catch(function (err) {\n              console.log(err);\n            });\n          });\n        }\n\n        ;\n      }\n\n      ;\n    }\n  }\n};\n/*  readAllData('posts')\n      .then(function(data) {\n          $(\"#imgf\").text('');\n          for (var dt of data) {\n              $(\"#imgf\").html(\"<p> \" + dt.data + '----' + dt.id + '-->' + dt.hora + \"</p><br> \");\n          }\n      })*/",{"version":3,"sources":["Foto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AA0BA;IACA;AACA,SACA,iBACA;AACA,SACA,YACA;;gBACA;;cACA;mBACA;;QAEA;wBACA;;WAEA;aACA;cACA;WACA,AACA;AALA;AAMA;;;mDAGA;iBACA,QACA;6BACA,IAJA,CAKA;;gCACA,IACA;;mDACA;;qBAEA,AACA;AAFA;AAGA;;AACA;;sBACA;sBACA;uBACA;eACA;;mCACA;4BACA,QACA;;6BACA;;cAEA;oBACA;yBACA;wCACA;4CACA;yCACA;uEACA;0EACA;qCACA;kBACA;wBACA,AACA;AAZA;iCAaA,OACA;;0BACA;AACA;;2BACA;mCACA;AACA;4CACA;WACA;uDACA,cACA;AACA;AACA;AACA;kBACA;2BACA,cACA;;;6CAEA;qBACA;+BACA;gDACA;wCACA;kCACA;4BACA;6BACA;4BACA;6BACA;;gCACA;qCACA;sCACA;wBACA;AACA;mBACA;uCACA;sCACA;yBACA;AACA;AACA;;2BACA;4BACA,OAvBA,CAwBA;;4CACA;gDACA,OACA;;yBACA;gCACA;0BACA;wCACA;4CACA;AACA;;+BACA;AACA;aACA;cACA;AACA;AACA;;6BAEA,IADA,CAEA;AACA;AACA;gCACA;AACA;mDACA;uDAEA,IADA,CAEA;AACA,gCACA;iDACA;AACA;uCACA,6BACA;yDACA;AACA,gCACA;iDACA;AACA;;mEACA;gCACA,yBACA;kCACA,uBACA;oCACA;AACA,8BACA;;uBAEA,AACA;AAFA;+CAIA;wBACA;AACA,kCACA;wBACA;AACA;AACA;AACA;;;;iCACA;oBACA,mCACA;oCACA;;gCACA;qGACA;AAEA;AACA;AACA;;;qDACA,KACA;;wBACA;AACA;kCACA;oCACA;6BACA;4BACA;sBACA;oBACA;4DACA,6BACA;6DACA;AACA,kCACA;mDACA;AACA;;qEACA;kCACA,yBACA;oCACA,uBACA;sCACA;AACA;;yBAGA,AACA;AAFA,gBADA,CAIA;;0BACA;AACA,oCACA;0BACA;AACA;AACA;AACA;;;AACA;;;AACA,AACA,AACA;AAxLA;AAVA;AAmMA,AACA,AACA,AACA,AACA,AACA","file":"Foto.vue","sourceRoot":"src/components/comps","sourcesContent":["<template>\n  <div class=\"foto\">\n    <h1>{{ msg }}</h1>\n      <p>Registre uma imagens para comprovar a identificação da árvore.</p>\n      <div v-if=\"!image\">\n            <div id=\"lastIMG\"> \n              <img id=\"imgL\" src=\"@/assets/icoo.png\" width=\"100px\" height=\"auto\"/>    \n    </div>\n    <input id=\"inputF\" type=\"file\" accept=\"video/*;capture=camcorder\" @change=\"onFileChange\">\n  </div>\n  <div v-else>\n          <div id=\"lastIMG\"> \n          <img id=\"imgL\" src=\"\" width=\"100px\" height=\"auto\"/>  \n    </div>\n    <img id=\"imgLoad\" :src=\"image\" width=\"100px\" height=\"auto\"/>\n      <input id=\"inputF\" type=\"file\" accept=\"video/*;capture=camcorder\" @change=\"onFileChange\">\n   <button @click=\"removeImage\">Remove image</button>\n      <br>\n       <button class=\"btavancar\" @click=\"avancar\">Salvar</button>\n      <!-- <button class=\"btavancar\" @click=\"carregar\">caregar</button>-->\n  </div>\n      <!--<input type=\"button\" value=\"Resize Image\"  @click=\"ResizeImage\"/>-->\n    <img src=\"\" id=\"output\">\n  </div>\n</template>\n<script>\n    var downloadURL;\n    import {\n        firestore\n    } from '@/main.js'\n    import {\n        noty\n    } from '@/assets/js/config.js'\n    var $ = require('jquery')\n    window.post = {}\n    import Swiper from 'swiper'\n    export default {\n        name: 'foto',\n        data() {\n            return {\n                msg: 'Imagens',\n                image: '',\n                imageB: '',\n                urr: ''\n            }\n        },\n        methods: {\n            onFileChange(e) {\n                var files = e.target.files || e.dataTransfer.files;\n                if (!files.length)\n                    return;\n                this.createImage(files[0]);\n                // this.createImageTest(files[0]);\n                var file = e.target.files[0];\n                //var storageRef = firebase.storage().ref(file.name);\n                console.log('<filename =============>', file.size);\n                var metadata = {\n                    contentType: 'image/jpeg'\n                };\n            },\n            createImage(file) {\n                var dataT = new Date();\n                var image = new Image();\n                var reader = new FileReader();\n                var vm = this;\n                reader.onload = (e) => {\n                    vm.image = e.target.result;\n                   // $(\"#lastIMG\").append('<img  src=\"' + vm.image + '\" width=\"100px\" height=\"auto\"/>');\n                    var ind = new Date().toISOString();\n                    post = {\n                        id: ind,\n                        image: vm.image,\n                        lele: vm.image.length,\n                        tag_num: this.$store.getters.getterTagN,\n                        geolocation: this.$store.getters.getterGeoL,\n                        cod_Tree: this.$store.getters.getterCodTree,\n                        data: dataT.getDate() + '/' + dataT.getMonth() + '/' + dataT.getFullYear(),\n                        hora: dataT.getHours() + ':' + dataT.getMinutes() + ':' + dataT.getSeconds(),\n                        user: this.$store.getters.getterUsrN,\n                        counts: '',\n                        downloadlink: ''\n                    };\n                    console.log('variavel>', post);\n                  //  $(\"#imgLoad\").remove();\n                    this.ResizeImage(file);\n                };\n                reader.readAsDataURL(file);\n                console.log('readerfile > ', reader);\n            },\n            ResizeImage(file) {\n                if ( //window.File && window.FileReader\n                    navigator.mediaDevices && navigator.mediaDevices.getUserMedia\n                ) {\n                    // var filesToUploads = document.getElementById('inputF').files;\n                    //var file = filesToUploads[0];\n                    //var file = post.image;\n                    if (file) {\n                        var reader = new FileReader();\n                        // Set the image once loaded into file reader\n                        reader.onload = function(e) {\n                            var img = document.createElement(\"img\");\n                            img.id = 'result';\n                            img.src = e.target.result;\n                            var canvas = document.createElement(\"canvas\");\n                            var ctx = canvas.getContext(\"2d\");\n                            ctx.drawImage(img, 0, 0);\n                            var MAX_WIDTH = 1024;\n                            var MAX_HEIGHT = 768;\n                            var width = img.width;\n                            var height = img.height;\n                            if (width > height) {\n                                if (width > MAX_WIDTH) {\n                                    height *= MAX_WIDTH / width;\n                                    width = MAX_WIDTH;\n                                }\n                            } else {\n                                if (height > MAX_HEIGHT) {\n                                    width *= MAX_HEIGHT / height;\n                                    height = MAX_HEIGHT;\n                                }\n                            }\n                            canvas.width = width;\n                            canvas.height = height;\n                            // var ctx = canvas.getContext(\"2d\");\n                            ctx.drawImage(img, 0, 0, width, height);\n                            var dataurl = canvas.toDataURL(file.type);\n                            //document.getElementById('lastIMG').src = dataurl;\n                            post.image = dataurl;\n                            post.lele = dataurl.length;\n                               $(\"#imgLoad\").remove(); \n                            $(\"#imgL\").attr(\"src\", post.image);\n                            console.log('readerfile new> ', post);\n                        }\n                        reader.readAsDataURL(file);\n                    }\n                } else {\n                    alert('The File APIs are not fully supported in this browser.');\n                }\n            },\n            removeImage: function(e) {\n                $(\"#imgL\").attr(\"src\", \"\");\n               // $(\"#lastIMG\").remove();\n               // $(\"#imgLoad\").remove();\n            },\n            avancar() {\n                // post.downloadlink =  downloadURL ;\n                firestore.collection(\"sid\").doc(post.id).set(post)\n                    .then(function(docRef) {\n                        console.log(\"Document written with ID: \", post.id);\n                        //console.log(\"Document Data with ID: \", dodoref);\n                    })\n                    .catch(function(error) {\n                        console.error(\"Error adding document: \", error);\n                    });\n                firestore.collection(\"sid2\").add(post)\n                    .then(function(docRef) {\n                        console.log(\"Document written with ID: \", docRef.id);\n                    })\n                    .catch(function(error) {\n                        console.error(\"Error adding document: \", error);\n                    })\n                if ('serviceWorker' in navigator && 'SyncManager' in window) {\n                    navigator.serviceWorker.ready\n                        .then(function(sw) {\n                            writeData('sync-posts', post)\n                                .then(function() {\n                                    return sw.sync.register('sync-new-posts');\n                                })\n                                .then(function() {\n                                    var data = {\n                                        message: 'Your Post was saved for syncing!'\n                                    };\n                                    noty(\"success\", data.message, post.id);\n\t\t\t\t\t\t\t\t\n                                    console.log(data);\n                                })\n                                .catch(function(err) {\n                                    console.log(err);\n                                });\n                        })\n                };\n                if ('indexedDB' in window) {\n                    readAllData('sync-posts')\n                        .then(function(data) {\n                            console.log('From cache', data);\n\t\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\t\tdocument.getElementById(\"sync-p\").innerHTML = \"data for sync  index !!!! .> .  \" + key + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n                        });\n                };\n                var mySwiper = new Swiper('.swiper-container', {});\n                //mySwiper.slideTo(1);\n                this.$router.push('/');\n            },\n            carregar() {\n                for (var i = 1; i < 400; i++) {\n                    var ind = new Date().toISOString();\n                    post.id = '\"' + i + '\"';\n                    post.counts = i;\n                    console.log(i);\n                    firestore.collection(\"sid3\").doc('\"' + i + '\"').set(post)\n                        .then(function(docRef) {\n                            console.log(\"Document written with ID: \" + '  >' + i);\n                        })\n                        .catch(function(error) {\n                            console.error(\"Error adding document: \", error);\n                        });\n                    if ('serviceWorker' in navigator && 'SyncManager' in window) {\n                        navigator.serviceWorker.ready\n                            .then(function(sw) {\n                                writeData('sync-posts', post)\n                                    .then(function() {\n                                        return sw.sync.register('sync-new-posts');\n                                    })\n                                    .then(function() {\n                                        var data = {\n                                            message: 'Your Post was saved for syncing!'\n                                        };\n                                        // noty(\"success\", data.message, post.id);\n                                        console.log(data);\n                                    })\n                                    .catch(function(err) {\n                                        console.log(err);\n                                    });\n                            })\n                    };\n                };\n            }\n        }\n    };\n    /*  readAllData('posts')\n          .then(function(data) {\n              $(\"#imgf\").text('');\n              for (var dt of data) {\n                  $(\"#imgf\").html(\"<p> \" + dt.data + '----' + dt.id + '-->' + dt.hora + \"</p><br> \");\n              }\n          })*/\n</script>\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n    h1,\n    h2,\n    p {\n        font-weight: normal;\n        color: black;\n    }\n\n    button {\n        color: aliceblue;\n        background-color: #000;\n        font-size: 1em;\n        padding: 1em 2em;\n        margin: 1em;\n        border: none !important;\n        border-radius: 5em;\n        box-shadow: none;\n    }\n</style>\n<!--// fetch('https://192.168.0.8/lambanca', { // method: 'POST', // headers: { // // 'dataType': 'json', // 'Access-Control-Allow-Origin': '*/*', // 'Content-Type': 'application/json', // 'Accept': 'application/json' // }, // dataType: 'json', // mode: 'cors', // body: JSON.stringify([post]) // }).then(function(response) { // console.log(response); // return response.json(); // }).then(function (data) { // // console.log(data); // }) // .catch(function(err) { // console.log('******'); // }); // // fetch('https://ativador-55a4a.firebaseio.com/posts/alfa.json', { // method: 'POST', // headers: { // // 'dataType': 'json', // 'Access-Control-Allow-Origin': '*/*', // 'Content-Type': 'application/json', // 'Accept': 'application/json' // }, // dataType: 'json', // mode: 'cors', // body: JSON.stringify([post]) // }).then(function(response) { // console.log(response); // return response.json(); // }).then(function (data) { // // console.log(data); // }) // .catch(function(err) { // console.log('******'); // }); // firebase.database().ref('posts/'+(post.tag_num)).set(post); // firebase.database().ref('posts').push(post);-->"]}]}