{"remainingRequest":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/babel-loader/lib/index.js!/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/danielsecco/Downloads/offline1---beta---v1-master/src/components/comps/Syncs.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/src/components/comps/Syncs.vue","mtime":1530315281000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/.babelrc","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/cache-loader/dist/cjs.js","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/babel-loader/lib/index.js","mtime":1530276600000},{"path":"/Users/danielsecco/Downloads/offline1---beta---v1-master/node_modules/vue-loader/lib/index.js","mtime":1530276600000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nif ('indexedDB' in window) {\n  readAllData('sync-posts').then(function (data) {\n    console.log('From cache to sync', data);\n    var i = 0;\n\n    for (var key in data) {\n      i++;\n      document.getElementById(\"sync-p\").innerHTML = \"data for sync  index  .> .  \" + i;\n      document.getElementById(\"nots\").innerHTML = \"data to sync  \" + i;\n    }\n  });\n}\n\n;\nexport default {\n  name: 'syncs',\n  data: function data() {\n    return {};\n  },\n  components: {},\n  methods: {\n    syncar: function syncar() {\n      console.log('[Service Worker] Syncing new Posts');\n      readAllData('sync-posts').then(function (data) {\n        var i = -1;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var dt = _step.value;\n            var synData = {\n              id: dt.id,\n              image: dt.image,\n              tag_num: dt.tag_num,\n              geolocation: dt.geolocation,\n              cod_Tree: dt.cod_Tree,\n              data: dt.data,\n              hora: dt.hora,\n              user: dt.user\n            };\n            console.log(synData);\n            fetch('https://ativador-55a4a.firebaseio.com/posts.json', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n              },\n              mode: 'cors',\n              body: JSON.stringify(dt)\n            }).then(function (res) {\n              console.log('Sent data', res);\n\n              if (res.ok) {\n                res.json().then(function (resData) {\n                  i++;\n                  console.log(dt, '  ---> ', data[i].id);\n                  deleteItemFromData('sync-posts', data[i].id); //deleteItemFromData('remoteDocuments', data[i].id);\n                });\n              }\n            }).catch(function (err) {\n              console.log('Error while sending data', err);\n            });\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      });\n      this.$router.push('/');\n    }\n  }\n};",{"version":3,"sources":["Syncs.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAWA;2BACA;cACA,mCACA;sCACA;YACA;;0BACA;AACA;qFACA;qEACA;AAEA;AACA;AAGA;;;;QAEA;wBACA;WACA,AACA;AACA;cACA,AACA;;8BAKA;kBAEA;kBACA;iBAEA;AADA;;;;;;AAGA;;qBAEA;wBACA;0BACA;8BACA;2BACA;uBACA;uBACA;uBACA,AAGA;AAXA;wBAaA;;sBAEA;;gCAEA;0BACA,AACA;AAHA;oBAIA;mCACA,AACA;AARA,mCASA;uCAEA;;0BACA;oBACA,+BAEA;AACA;qDACA;2DACA,KACA;AACA;AACA;AACA,oCACA;sDACA;AACA;AAEA;;;;;;;;;;;;;;;AACA;wBAEA;AAEA,AACA;AA3DA;AARA","file":"Syncs.vue","sourceRoot":"src/components/comps","sourcesContent":["<template>\n    <div class=\"syncs\">\n    <div id=\"sync-p\" class=\"container\">\n    \t\n    </div>\n    \t<button class=\"btavancar\" @click=\"syncar\">Sync to RTDB</button>\n    \t\n    </div>\n</template>\n\n<script>\n\tif ('indexedDB' in window) {\n                    readAllData('sync-posts')\n                        .then(function(data) {\n                            console.log('From cache to sync', data);\n\t\t\t\t\t\tvar i=0;\n\t\t\t\t\t\tfor(var key in data){\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\tdocument.getElementById(\"sync-p\").innerHTML = \"data for sync  index  .> .  \" + i;\n\t\t\t\t\t\t\tdocument.getElementById(\"nots\").innerHTML = \"data to sync  \" +i;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n                        });\n                };\n\t\n\t\n    export default {\n\t\tname: 'syncs',\n        data () {\n            return {\n            }\n        },\n        components: {\n        },\n\t\tmethods: {\n            syncar() {\n               \n\n\n    console.log('[Service Worker] Syncing new Posts');\n \n      readAllData('sync-posts')\n        .then(function(data) {\n          var i = -1;\n          for (var dt of data) {\n              \n               var synData = {\n                     id: dt.id,\n                     image: dt.image,\n                     tag_num: dt.tag_num,\n                     geolocation: dt.geolocation,\n                     cod_Tree: dt.cod_Tree,\n                     data: dt.data,\n                     hora: dt.hora,\n                     user: dt.user\n               };\n             \n             \n             console.log(synData);\n           \n            fetch('https://ativador-55a4a.firebaseio.com/posts.json' , {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n              },\n        mode: 'cors',\n              body:JSON.stringify(dt)\n            })\n              .then(function(res) {\n                console.log('Sent data', res);\n                \n                if (res.ok) {\n                  res.json()\n                    .then(function(resData) {\n                     \n                      i++;\n                      console.log(dt, '  ---> ', data[i].id);\n                      deleteItemFromData('sync-posts', data[i].id);\n                      //deleteItemFromData('remoteDocuments', data[i].id);\n                    });\n                }\n              })\n              .catch(function(err) {\n                console.log('Error while sending data', err);\n              });\n          }\n\n        })\n   this.$router.push('/');\n\n            },\n           \n        },\n    }\n</script>\n\n<style scoped=\"true\">\n      button.btavancar {\n    color: aliceblue;\nbackground-color: #000;\n\tfont-size: 1em;\n\tpadding: 1em 2em;\n        margin: 1em;\n\tborder: none !important;\n\tborder-radius: 5em;\n\tbox-shadow: none;\n}  \n</style>"]}]}